import{r as n,j as e,V as fe,d as he,A as ge,e as je,X as B,f as be,g as Ne,h as lt,i as ve,k as ct,L as ye,l as we,m as Se,n as mt,S as ut,o as G,U as Te,p as X,q as Z,s as ce,t as J,u as xt,v as Ce,w as pt,x as Ae,y as ft,z as ke,I as Re,B as De,E as Ie,F as Ee,H as ht,J as Oe,K as Le,M as gt,N as jt,Q as bt,W as me,Y as $e,Z as Pe,_ as Fe,$ as Me,a0 as ze,a1 as _e,a2 as Nt,a3 as vt,a4 as yt,a5 as ue,a6 as wt,a7 as St,a8 as Tt,a9 as Ct,aa as At,ab as kt,ac as Rt,ad as Dt,ae as xe,af as It}from"./vendor_react-DT7kCdac.js";import{z as Et,B as Ot,C as Be,D as Lt,T as $t,E as I,Q as Pt}from"./vendor-D-BJuNpl.js";import"./vendor_radix-DW48STyt.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();const Ft=1,Mt=1e6;let Y=0;function zt(){return Y=(Y+1)%Number.MAX_SAFE_INTEGER,Y.toString()}const K=new Map,pe=a=>{if(K.has(a))return;const t=setTimeout(()=>{K.delete(a),_({type:"REMOVE_TOAST",toastId:a})},Mt);K.set(a,t)},_t=(a,t)=>{switch(t.type){case"ADD_TOAST":return{...a,toasts:[t.toast,...a.toasts].slice(0,Ft)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?pe(s):a.toasts.forEach(r=>{pe(r.id)}),{...a,toasts:a.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(s=>s.id!==t.toastId)}}},H=[];let V={toasts:[]};function _(a){V=_t(V,a),H.forEach(t=>{t(V)})}function y({...a}){const t=zt(),s=i=>_({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>_({type:"DISMISS_TOAST",toastId:t});return _({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:s}}function Bt(){const[a,t]=n.useState(V);return n.useEffect(()=>(H.push(t),()=>{const s=H.indexOf(t);s>-1&&H.splice(s,1)}),[a]),{...a,toast:y,dismiss:s=>_({type:"DISMISS_TOAST",toastId:s})}}function c(...a){return Et(Ot(a))}const Ut=lt,Ue=n.forwardRef(({className:a,...t},s)=>e.jsx(fe,{ref:s,className:c("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...t}));Ue.displayName=fe.displayName;const Ht=Be("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),He=n.forwardRef(({className:a,variant:t,...s},r)=>e.jsx(he,{ref:r,className:c(Ht({variant:t}),a),...s}));He.displayName=he.displayName;const Vt=n.forwardRef(({className:a,...t},s)=>e.jsx(ge,{ref:s,className:c("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...t}));Vt.displayName=ge.displayName;const Ve=n.forwardRef(({className:a,...t},s)=>e.jsx(je,{ref:s,className:c("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...t,children:e.jsx(B,{className:"h-4 w-4"})}));Ve.displayName=je.displayName;const We=n.forwardRef(({className:a,...t},s)=>e.jsx(be,{ref:s,className:c("text-sm font-semibold",a),...t}));We.displayName=be.displayName;const Je=n.forwardRef(({className:a,...t},s)=>e.jsx(Ne,{ref:s,className:c("text-sm opacity-90",a),...t}));Je.displayName=Ne.displayName;function Wt(){const{toasts:a}=Bt();return e.jsxs(Ut,{children:[a.map(function({id:t,title:s,description:r,action:i,...l}){return e.jsxs(He,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(We,{children:s}),r&&e.jsx(Je,{children:r})]}),i,e.jsx(Ve,{})]},t)}),e.jsx(Ue,{})]})}const Jt=({...a})=>{const{theme:t="system"}=Lt();return e.jsx($t,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...a})},Qt=ct,Yt=n.forwardRef(({className:a,sideOffset:t=4,...s},r)=>e.jsx(ve,{ref:r,sideOffset:t,className:c("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s}));Yt.displayName=ve.displayName;const Qe=n.createContext(void 0);function U(){const a=n.useContext(Qe);if(a===void 0)throw new Error("useAttendance must be used within an AttendanceProvider");return a}function Kt({children:a}){const[t,s]=n.useState([]),[r,i]=n.useState([]),[l,f]=n.useState(!1),[g,d]=n.useState(!1),[m,p]=n.useState(null);n.useEffect(()=>{o()},[]);const o=()=>{const u=localStorage.getItem("attendance_students");if(u)try{const j=JSON.parse(u);s(j),console.log("Auto-restored students from local storage",j)}catch(j){console.error("Failed to parse saved students:",j),y({title:"Error",description:"Failed to restore student data",variant:"destructive"})}};n.useEffect(()=>{t.length>0&&localStorage.setItem("attendance_students",JSON.stringify(t))},[t]);const h=u=>{if(!u.trim()){y({title:"Error",description:"Student name cannot be empty",variant:"destructive"});return}if(t.some(j=>j.name.toLowerCase()===u.toLowerCase())){y({title:"Error",description:`Student "${u}" already exists`,variant:"destructive"});return}s(j=>[...j,{id:Date.now().toString(),name:u,dateAdded:new Date().toISOString(),attendanceCount:0,lastPresent:null}]),y({title:"Success",description:`Student "${u}" added successfully`})},x=u=>{const j=t.find(N=>N.id===u);j&&(s(N=>N.filter(S=>S.id!==u)),l&&r.includes(j.name)&&i(N=>N.filter(S=>S!==j.name)),y({title:"Success",description:`Student "${j.name}" deleted successfully`}))},b=u=>{if(!l){console.log("Cannot mark attendance: No active session");return}console.log("Marking student as present:",u),r.includes(u)?console.log("Student already marked present:",u):(console.log("Adding student to present list:",u),i(j=>[...j,u]),s(j=>j.map(N=>N.name===u?(console.log("Updating attendance count for:",N.name),{...N,attendanceCount:N.attendanceCount+1,lastPresent:new Date().toISOString()}):N)))},v=()=>{if(t.length===0){y({title:"Warning",description:"No students registered yet",variant:"destructive"});return}console.log("Starting attendance session"),i([]),f(!0),p(new Date),y({title:"Attendance Started",description:"Scanning for students..."})},k=()=>{console.log("Ending attendance session, students present:",r),f(!1),y({title:"Attendance Ended",description:`${r.length} students marked present`})},O=()=>{if(r.length===0){y({title:"Warning",description:"No attendance data to save",variant:"destructive"});return}d(!0);try{const u={date:new Date().toISOString(),totalStudents:t.length,presentStudents:r,absentStudents:t.filter(N=>!r.includes(N.name)).map(N=>N.name),sessionStartTime:(m==null?void 0:m.toISOString())||new Date().toISOString(),sessionEndTime:new Date().toISOString()},j=JSON.parse(localStorage.getItem("attendance_logs")||"[]");j.unshift(u),localStorage.setItem("attendance_logs",JSON.stringify(j)),y({title:"Success",description:"Attendance log saved successfully"})}catch(u){console.error("Failed to save attendance log:",u),y({title:"Error",description:"Failed to save attendance log",variant:"destructive"})}finally{d(!1),p(null)}},L=()=>{d(!0);try{const u={students:t,logs:JSON.parse(localStorage.getItem("attendance_logs")||"[]"),backupDate:new Date().toISOString()},j=JSON.stringify(u,null,2),N=new Blob([j],{type:"application/json"}),S=URL.createObjectURL(N),E=document.createElement("a");E.href=S;const $=new Date().toISOString().split("T")[0];E.download=`attendance_backup_${$}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(S),y({title:"Backup Created",description:"Data backup downloaded successfully"})}catch(u){console.error("Failed to create backup:",u),y({title:"Error",description:"Failed to create backup",variant:"destructive"})}finally{d(!1)}};return e.jsx(Qe.Provider,{value:{students:t,presentStudents:r,addStudent:h,deleteStudent:x,markPresent:b,startAttendance:v,endAttendance:k,isAttendanceActive:l,saveAttendanceLog:O,backupData:L,autoRestoreStudents:o,isProcessing:g},children:a})}const T=n.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t}));T.displayName="Card";const C=n.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("flex flex-col space-y-1.5 p-6",a),...t}));C.displayName="CardHeader";const R=n.forwardRef(({className:a,...t},s)=>e.jsx("h3",{ref:s,className:c("text-2xl font-semibold leading-none tracking-tight",a),...t}));R.displayName="CardTitle";const D=n.forwardRef(({className:a,...t},s)=>e.jsx("p",{ref:s,className:c("text-sm text-muted-foreground",a),...t}));D.displayName="CardDescription";const A=n.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("p-6 pt-0",a),...t}));A.displayName="CardContent";const ee=n.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:c("flex items-center p-6 pt-0",a),...t}));ee.displayName="CardFooter";const Gt=mt,Ye=n.forwardRef(({className:a,...t},s)=>e.jsx(ye,{ref:s,className:c("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...t}));Ye.displayName=ye.displayName;const P=n.forwardRef(({className:a,...t},s)=>e.jsx(we,{ref:s,className:c("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...t}));P.displayName=we.displayName;const F=n.forwardRef(({className:a,...t},s)=>e.jsx(Se,{ref:s,className:c("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t}));F.displayName=Se.displayName;const te=n.forwardRef(({className:a,type:t,...s},r)=>e.jsx("input",{type:t,className:c("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...s}));te.displayName="Input";const se=Be("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),w=n.forwardRef(({className:a,variant:t,size:s,asChild:r=!1,...i},l)=>{const f=r?ut:"button";return e.jsx(f,{className:c(se({variant:t,size:s,className:a})),ref:l,...i})});w.displayName="Button";const Ke=({onCapture:a,isActive:t=!1,facingMode:s="user",showButton:r=!0,buttonText:i="Capture"})=>{const l=n.useRef(null),[f,g]=n.useState(null),[d,m]=n.useState(!1),[p,o]=n.useState(null);n.useEffect(()=>(t?h():x(),()=>{x()}),[t,s]);const h=async()=>{m(!0),o(null);try{const v={video:{facingMode:s}},k=await navigator.mediaDevices.getUserMedia(v);l.current&&(l.current.srcObject=k,g(k))}catch(v){console.error("Error accessing webcam:",v),o("Could not access webcam. Please check permissions.")}finally{m(!1)}},x=()=>{f&&(f.getTracks().forEach(v=>{v.stop()}),g(null),l.current&&(l.current.srcObject=null))},b=()=>{if(!l.current||!f)return;const v=l.current,k=document.createElement("canvas");k.width=v.videoWidth,k.height=v.videoHeight;const O=k.getContext("2d");if(!O)return;O.drawImage(v,0,0,k.width,k.height);const L=k.toDataURL("image/jpeg");a(L)};return e.jsxs("div",{className:"webcam-container",children:[d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-800/50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),p&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-800/80 text-white p-4 text-center",children:[e.jsx(G,{className:"h-10 w-10 mb-2 text-red-500"}),e.jsx("p",{children:p}),e.jsx(w,{variant:"outline",onClick:h,className:"mt-4",children:"Try again"})]}),e.jsx("video",{ref:l,className:"webcam-video",autoPlay:!0,playsInline:!0,muted:!0}),e.jsx("div",{className:"webcam-overlay"}),r&&e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:e.jsxs(w,{onClick:b,disabled:d||!f||!!p,className:"bg-attendance-primary hover:bg-attendance-primary/90",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),i]})}),t&&f&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"recording-indicator flex h-3 w-3 rounded-full bg-red-500"})})]})},Xt=()=>{const{addStudent:a}=U(),[t,s]=n.useState(""),[r,i]=n.useState(!1),[l,f]=n.useState([]),[g,d]=n.useState(!1),m=x=>{l.length<5&&f(b=>[...b,x]),l.length===4&&setTimeout(()=>{p()},500)},p=()=>{!t.trim()||l.length===0||(d(!0),setTimeout(()=>{a(t),o(),d(!1)},1500))},o=()=>{s(""),f([]),i(!1)},h=()=>{t.trim()&&(i(!0),f([]))};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(T,{children:[e.jsxs(C,{children:[e.jsx(R,{children:"Student Registration"}),e.jsx(D,{children:"Add a new student to the attendance system"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Student Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{id:"name",placeholder:"Enter full name",value:t,onChange:x=>s(x.target.value),disabled:r||g}),e.jsxs(w,{onClick:h,disabled:!t.trim()||r||g,children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Next"]})]})]}),r&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Captured Images (",l.length,"/5)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array(5).fill(0).map((x,b)=>e.jsx("div",{className:`w-16 h-16 rounded border-2 ${b<l.length?"border-primary":"border-dashed border-gray-300"} overflow-hidden bg-slate-100`,children:b<l.length?e.jsx("img",{src:l[b],alt:`Capture ${b+1}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(X,{className:"w-4 h-4"})})},b))})]})]}),e.jsxs(ee,{className:"flex justify-between",children:[e.jsx(w,{variant:"outline",onClick:o,disabled:g,children:"Cancel"}),e.jsx(w,{onClick:p,disabled:!t.trim()||l.length<5||g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"●"}),"Processing..."]}):"Register Student"})]})]}),e.jsxs(T,{children:[e.jsxs(C,{children:[e.jsx(R,{children:"Face Capture"}),e.jsx(D,{children:"Capture 5 images of the student's face"})]}),e.jsx(A,{children:r?e.jsx(Ke,{onCapture:m,isActive:r,showButton:l.length<5&&!g,buttonText:`Capture (${l.length+1}/5)`}):e.jsxs("div",{className:"h-[320px] bg-slate-100 rounded-md flex flex-col items-center justify-center text-slate-500",children:[e.jsx(G,{className:"w-12 h-12 mb-2"}),e.jsx("p",{children:"Enter student name to start"})]})})]})]})},Zt=()=>{const{students:a,presentStudents:t,isAttendanceActive:s,startAttendance:r,endAttendance:i,markPresent:l,saveAttendanceLog:f}=U(),[g,d]=n.useState([]),[m,p]=n.useState(!1),[o,h]=n.useState(null),[x,b]=n.useState(new Date);n.useEffect(()=>{if(s){const u=setInterval(()=>{b(new Date)},1e3);return()=>clearInterval(u)}},[s]),n.useEffect(()=>{if(!s||a.length===0){console.log("Face recognition simulation not active",{isAttendanceActive:s,studentsCount:a.length});return}console.log("Starting face recognition simulation");let u;const j=()=>{const S=a.filter(Q=>!t.includes(Q.name));if(console.log("Unrecognized students:",S.length),S.length===0)return;const E=Math.floor(Math.random()*S.length),$=S[E];console.log("Recognized student:",$.name),l($.name);const it=new Date;d(Q=>[{name:$.name,time:it.toLocaleTimeString()},...Q])},N=()=>{const S=Math.random()*3e3+2e3;console.log(`Scheduling next recognition in ${Math.round(S)}ms`),u=setTimeout(()=>{j(),N()},S)};return N(),()=>{console.log("Cleaning up face recognition simulation"),clearTimeout(u)}},[s,a,t,l]);const v=()=>{p(!0),d([]),setTimeout(()=>{r(),p(!1),b(new Date)},1500)},k=()=>{p(!0),setTimeout(()=>{i(),p(!1),t.length>0&&h(20)},1e3)};n.useEffect(()=>{if(o===null)return;if(o<=0){f(),h(null),y({title:"Attendance Saved",description:"Attendance log has been saved automatically"});return}const u=setTimeout(()=>{h(o-1)},1e3);return()=>clearTimeout(u)},[o,f]);const O=u=>u.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),L=u=>u.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(T,{children:[e.jsxs(C,{children:[e.jsx(R,{children:"Live Attendance"}),e.jsx(D,{children:s?"Currently taking attendance...":"Start an attendance session"})]}),e.jsxs(A,{className:"space-y-4",children:[s&&e.jsxs("div",{className:"flex flex-col gap-1 p-3 bg-slate-50 rounded-md mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-slate-700"}),e.jsx("span",{className:"font-medium",children:O(x)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-slate-700"}),e.jsx("span",{className:"text-xl font-bold text-slate-700",children:L(x)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Students Present"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(J,{className:"w-5 h-5 text-emerald-500"}),e.jsxs("span",{className:"text-2xl font-bold",children:[t.length," / ",a.length]})]})]}),s?e.jsx(w,{variant:"destructive",onClick:k,disabled:m,children:m?"Processing...":"End Attendance"}):e.jsx(w,{onClick:v,disabled:m||a.length===0,children:m?"Starting...":"Start Attendance"})]}),e.jsxs("div",{className:"border rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Recognition Log"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date().toLocaleDateString()})]}),g.length===0?e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:s?"Waiting for faces to recognize...":"No attendance session active"}):e.jsx("div",{className:"space-y-2 max-h-[240px] overflow-y-auto",children:g.map((u,j)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-attendance-primary/20 flex items-center justify-center",children:e.jsx(xt,{className:"w-4 h-4 text-attendance-primary"})}),e.jsx("span",{children:u.name})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:u.time})]},`${u.name}-${j}`))})]}),t.length>0&&!s&&e.jsx(e.Fragment,{children:o!==null?e.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-amber-50 rounded-md border border-amber-200",children:[e.jsx(ce,{className:"w-4 h-4 text-amber-500"}),e.jsxs("span",{className:"text-sm",children:["Saving attendance in ",e.jsx("span",{className:"font-bold",children:o})," seconds..."]})]}):e.jsxs(w,{variant:"outline",className:"w-full",onClick:f,children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Save Attendance Log"]})})]})]}),e.jsxs(T,{children:[e.jsxs(C,{children:[e.jsx(R,{children:"Face Recognition"}),e.jsx(D,{children:s?"Scanning for registered students...":"Start attendance to begin scanning"})]}),e.jsxs(A,{children:[e.jsx(Ke,{onCapture:()=>{},isActive:s,showButton:!1}),s&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-3 bg-emerald-50 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"font-medium",children:"Present"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700 mt-1",children:t.length})]}),e.jsxs("div",{className:"p-3 bg-rose-50 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-rose-500"}),e.jsx("span",{className:"font-medium",children:"Absent"})]}),e.jsx("p",{className:"text-2xl font-bold text-rose-700 mt-1",children:a.length-t.length})]})]})]})]})]})},qt=gt,es=jt,ts=n.forwardRef(({className:a,inset:t,children:s,...r},i)=>e.jsxs(Ce,{ref:i,className:c("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",a),...r,children:[s,e.jsx(pt,{className:"ml-auto h-4 w-4"})]}));ts.displayName=Ce.displayName;const ss=n.forwardRef(({className:a,...t},s)=>e.jsx(Ae,{ref:s,className:c("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...t}));ss.displayName=Ae.displayName;const Ge=n.forwardRef(({className:a,sideOffset:t=4,...s},r)=>e.jsx(ft,{children:e.jsx(ke,{ref:r,sideOffset:t,className:c("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}));Ge.displayName=ke.displayName;const W=n.forwardRef(({className:a,inset:t,...s},r)=>e.jsx(Re,{ref:r,className:c("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",a),...s}));W.displayName=Re.displayName;const as=n.forwardRef(({className:a,children:t,checked:s,...r},i)=>e.jsxs(De,{ref:i,className:c("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ie,{children:e.jsx(J,{className:"h-4 w-4"})})}),t]}));as.displayName=De.displayName;const ns=n.forwardRef(({className:a,children:t,...s},r)=>e.jsxs(Ee,{ref:r,className:c("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ie,{children:e.jsx(ht,{className:"h-2 w-2 fill-current"})})}),t]}));ns.displayName=Ee.displayName;const Xe=n.forwardRef(({className:a,inset:t,...s},r)=>e.jsx(Oe,{ref:r,className:c("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",a),...s}));Xe.displayName=Oe.displayName;const Ze=n.forwardRef(({className:a,...t},s)=>e.jsx(Le,{ref:s,className:c("-mx-1 my-1 h-px bg-muted",a),...t}));Ze.displayName=Le.displayName;const qe=()=>{const[a,t]=n.useState([]),[s,r]=n.useState(null);n.useEffect(()=>{const d=localStorage.getItem("attendance_logs");if(d)try{const m=JSON.parse(d);t(m),m.length>0&&r(m[0])}catch(m){console.error("Failed to parse logs:",m)}},[]);const i=d=>new Date(d).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),l=d=>{const m=["Student Name","Status"],p=[...d.presentStudents.map(v=>[v,"Present"]),...d.absentStudents.map(v=>[v,"Absent"])],o=[m.join(","),...p.map(v=>v.join(","))].join(`
`),h=new Blob([o],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(h),b=document.createElement("a");b.setAttribute("href",x),b.setAttribute("download",`attendance_${i(d.date).replace(/,/g,"").replace(/ /g,"_")}.csv`),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b),y({title:"Success",description:"Attendance exported as CSV file"})},f=d=>{const m=i(d.date);let p=`Attendance Report - ${m}
`;p+=`Total Students: ${d.totalStudents}

`,p+=`PRESENT STUDENTS:
`,p+=d.presentStudents.length>0?d.presentStudents.map(b=>`- ${b}`).join(`
`):"None",p+=`

ABSENT STUDENTS:
`,p+=d.absentStudents.length>0?d.absentStudents.map(b=>`- ${b}`).join(`
`):"None",p+=`

Attendance rate: ${Math.round(d.presentStudents.length/d.totalStudents*100)}%`;const o=new Blob([p],{type:"text/plain;charset=utf-8;"}),h=URL.createObjectURL(o),x=document.createElement("a");x.setAttribute("href",h),x.setAttribute("download",`attendance_${m.replace(/,/g,"").replace(/ /g,"_")}.txt`),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x),y({title:"Success",description:"Attendance exported as text file"})},g=d=>{const m=i(d.date),p=Math.round(d.presentStudents.length/d.totalStudents*100),o=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Attendance Report - ${m}</title>
        <style>
          body {
            font-family: Arial, sans-serif;
            margin: 40px;
            color: #333;
          }
          h1 {
            color: #1a56db;
            margin-bottom: 10px;
          }
          .summary {
            margin-bottom: 30px;
            font-size: 16px;
          }
          .stat {
            font-weight: bold;
            color: #1a56db;
          }
          .section {
            margin-bottom: 20px;
          }
          h2 {
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
          }
          ul {
            padding-left: 25px;
          }
          li {
            margin-bottom: 5px;
          }
          .present {
            color: #047857;
          }
          .absent {
            color: #dc2626;
          }
          .footer {
            margin-top: 40px;
            font-size: 12px;
            color: #666;
            text-align: center;
          }
        </style>
      </head>
      <body>
        <h1>Attendance Report</h1>
        <div class="summary">
          <p>Date: <span class="stat">${m}</span></p>
          <p>Total Students: <span class="stat">${d.totalStudents}</span></p>
          <p>Attendance Rate: <span class="stat">${p}%</span></p>
        </div>

        <div class="section">
          <h2 class="present">Present Students (${d.presentStudents.length})</h2>
          ${d.presentStudents.length>0?`<ul>
              ${d.presentStudents.map(x=>`<li>${x}</li>`).join("")}
            </ul>`:"<p>None</p>"}
        </div>

        <div class="section">
          <h2 class="absent">Absent Students (${d.absentStudents.length})</h2>
          ${d.absentStudents.length>0?`<ul>
              ${d.absentStudents.map(x=>`<li>${x}</li>`).join("")}
            </ul>`:"<p>None</p>"}
        </div>

        <div class="footer">
          Generated on ${new Date().toLocaleString()}
        </div>
      </body>
      </html>
    `,h=window.open("","_blank");h?(h.document.write(o),h.document.close(),setTimeout(()=>{h.print()},500),y({title:"PDF Ready",description:"Attendance report opened in new tab ready for printing as PDF"})):y({title:"Error",description:"Please allow pop-ups to generate PDF report",variant:"destructive"})};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(T,{className:"lg:col-span-1",children:[e.jsxs(C,{children:[e.jsx(R,{children:"Attendance Logs"}),e.jsx(D,{children:"Select a date to view details"})]}),e.jsx(A,{children:a.length===0?e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No attendance logs available"}):e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:a.map((d,m)=>e.jsxs("button",{className:`w-full flex justify-between items-center p-3 rounded-md text-left ${s&&s.date===d.date?"bg-primary/10 border border-primary/30":"bg-slate-50 hover:bg-slate-100"}`,onClick:()=>r(d),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:i(d.date)})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.presentStudents.length,"/",d.totalStudents]})]},`${d.date}-${m}`))})})]}),e.jsxs(T,{className:"lg:col-span-2",children:[e.jsxs(C,{children:[e.jsx(R,{children:"Attendance Details"}),e.jsx(D,{children:s?`Log for ${i(s.date)}`:"Select a log to view details"})]}),e.jsx(A,{children:s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Attendance Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[Math.round(s.presentStudents.length/s.totalStudents*100),"%"]})]}),e.jsxs(qt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(w,{variant:"outline",children:"Export"})}),e.jsxs(Ge,{align:"end",children:[e.jsx(Xe,{children:"Export Options"}),e.jsx(Ze,{}),e.jsxs(W,{onClick:()=>g(s),children:[e.jsx(bt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Export as PDF"})]}),e.jsxs(W,{onClick:()=>f(s),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Export as Text"})]}),e.jsxs(W,{onClick:()=>l(s),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Export as CSV"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2 font-medium",children:[e.jsx(J,{className:"w-4 h-4 text-emerald-500"}),"Present (",s.presentStudents.length,")"]}),e.jsx("div",{className:"bg-slate-50 rounded-md p-2 max-h-[240px] overflow-y-auto",children:s.presentStudents.length>0?e.jsx("ul",{className:"space-y-1",children:s.presentStudents.map((d,m)=>e.jsx("li",{className:"p-2 bg-white rounded text-sm",children:d},`present-${m}`))}):e.jsx("p",{className:"text-center py-4 text-muted-foreground text-sm",children:"No students present"})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2 font-medium",children:[e.jsx(B,{className:"w-4 h-4 text-rose-500"}),"Absent (",s.absentStudents.length,")"]}),e.jsx("div",{className:"bg-slate-50 rounded-md p-2 max-h-[240px] overflow-y-auto",children:s.absentStudents.length>0?e.jsx("ul",{className:"space-y-1",children:s.absentStudents.map((d,m)=>e.jsx("li",{className:"p-2 bg-white rounded text-sm",children:d},`absent-${m}`))}):e.jsx("p",{className:"text-center py-4 text-muted-foreground text-sm",children:"No students absent"})})]})]})]}):e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"No log selected"})})]})]})},et=vt,rs=yt,os=Nt,tt=n.forwardRef(({className:a,...t},s)=>e.jsx($e,{className:c("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:s}));tt.displayName=$e.displayName;const ae=n.forwardRef(({className:a,...t},s)=>e.jsxs(os,{children:[e.jsx(tt,{}),e.jsx(Pe,{ref:s,className:c("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]}));ae.displayName=Pe.displayName;const ne=({className:a,...t})=>e.jsx("div",{className:c("flex flex-col space-y-2 text-center sm:text-left",a),...t});ne.displayName="AlertDialogHeader";const re=({className:a,...t})=>e.jsx("div",{className:c("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});re.displayName="AlertDialogFooter";const oe=n.forwardRef(({className:a,...t},s)=>e.jsx(Fe,{ref:s,className:c("text-lg font-semibold",a),...t}));oe.displayName=Fe.displayName;const de=n.forwardRef(({className:a,...t},s)=>e.jsx(Me,{ref:s,className:c("text-sm text-muted-foreground",a),...t}));de.displayName=Me.displayName;const ie=n.forwardRef(({className:a,...t},s)=>e.jsx(ze,{ref:s,className:c(se(),a),...t}));ie.displayName=ze.displayName;const le=n.forwardRef(({className:a,...t},s)=>e.jsx(_e,{ref:s,className:c(se({variant:"outline"}),"mt-2 sm:mt-0",a),...t}));le.displayName=_e.displayName;const ds=()=>{const{backupData:a,students:t,isProcessing:s}=U(),[r,i]=n.useState(!1),[l,f]=n.useState(null),g=m=>{m.target.files&&m.target.files[0]&&f(m.target.files[0])},d=()=>{if(!l)return;const m=new FileReader;m.onload=p=>{var o;try{const h=(o=p.target)==null?void 0:o.result,x=JSON.parse(h);if(!x.students||!x.logs||!x.backupDate)throw new Error("Invalid backup file format");localStorage.setItem("attendance_students",JSON.stringify(x.students)),localStorage.setItem("attendance_logs",JSON.stringify(x.logs)),i(!1),window.location.reload()}catch(h){console.error("Failed to restore backup:",h),alert("Failed to restore backup. Invalid file format.")}},m.readAsText(l)};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(T,{children:[e.jsxs(C,{children:[e.jsx(R,{children:"Data Backup"}),e.jsx(D,{children:"Create a backup of all your attendance data"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm",children:"Backup includes all student records, attendance logs, and system settings. We recommend creating regular backups to prevent data loss."}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-md flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mt-0.5",children:e.jsx(ue,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Backup Information"}),e.jsxs("ul",{className:"mt-1 text-sm text-blue-700 space-y-1",children:[e.jsxs("li",{children:["• ",t.length," registered students"]}),e.jsx("li",{children:"• All attendance logs"}),e.jsx("li",{children:"• System configurations"})]})]})]}),e.jsx(w,{className:"w-full",onClick:a,disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"●"}),"Creating Backup..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Create Backup"]})})]})]}),e.jsxs(T,{children:[e.jsxs(C,{children:[e.jsx(R,{children:"Data Restore"}),e.jsx(D,{children:"Restore from a previous backup file"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm",children:"Restoring from a backup will replace all current data including students, attendance records, and settings. This action cannot be undone."}),e.jsxs("div",{className:"p-4 bg-amber-50 rounded-md flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center mt-0.5",children:e.jsx(X,{className:"w-4 h-4 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-800",children:"Important Warning"}),e.jsx("p",{className:"mt-1 text-sm text-amber-700",children:"Restoring will overwrite all existing data. Make sure to create a backup of your current data before proceeding."})]})]}),e.jsxs(w,{variant:"outline",className:"w-full",onClick:()=>i(!0),children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Restore from Backup"]})]})]}),e.jsx(et,{open:r,onOpenChange:i,children:e.jsxs(ae,{children:[e.jsxs(ne,{children:[e.jsx(oe,{children:"Restore from Backup"}),e.jsx(de,{children:"Select a backup file to restore your data. This will overwrite all existing data."})]}),e.jsx("div",{className:"py-3",children:e.jsx("input",{type:"file",accept:".json",onChange:g,className:`block w-full text-sm text-slate-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-md file:border-0
                file:text-sm file:font-medium
                file:bg-primary file:text-white
                hover:file:cursor-pointer`})}),e.jsxs(re,{children:[e.jsx(le,{children:"Cancel"}),e.jsx(ie,{onClick:d,disabled:!l,children:"Restore"})]})]})})]})},is=()=>{const{students:a,presentStudents:t,isAttendanceActive:s}=U();return e.jsxs("div",{className:"container py-6",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-attendance-secondary",children:"Smart Attendance System"}),e.jsx("p",{className:"text-muted-foreground",children:"Face recognition-based attendance tracking"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs(T,{children:[e.jsxs(C,{className:"pb-2",children:[e.jsx(R,{children:"Registered Students"}),e.jsx(D,{children:"Total students in system"})]}),e.jsx(A,{children:e.jsx("p",{className:"text-4xl font-bold text-attendance-primary",children:a.length})})]}),e.jsxs(T,{children:[e.jsxs(C,{className:"pb-2",children:[e.jsx(R,{children:"Present Today"}),e.jsx(D,{children:"Students marked present"})]}),e.jsx(A,{children:e.jsx("p",{className:"text-4xl font-bold text-emerald-500",children:t.length})})]}),e.jsxs(T,{children:[e.jsxs(C,{className:"pb-2",children:[e.jsx(R,{children:"Absent Today"}),e.jsx(D,{children:"Students not present"})]}),e.jsx(A,{children:e.jsx("p",{className:"text-4xl font-bold text-rose-500",children:a.length-t.length})})]})]}),e.jsxs(Gt,{defaultValue:"attendance",className:"space-y-4",children:[e.jsxs(Ye,{children:[e.jsx(P,{value:"attendance",children:"Take Attendance"}),e.jsx(P,{value:"register",children:"Register Students"}),e.jsx(P,{value:"history",children:"Attendance History"}),e.jsx(P,{value:"management",children:"Data Management"})]}),e.jsx(F,{value:"attendance",children:e.jsx(Zt,{})}),e.jsx(F,{value:"register",children:e.jsx(Xt,{})}),e.jsx(F,{value:"history",children:e.jsx(qe,{})}),e.jsx(F,{value:"management",children:e.jsx(ds,{})})]})]})},st=({shouldScaleBackground:a=!0,...t})=>e.jsx(I.Root,{shouldScaleBackground:a,...t});st.displayName="Drawer";const ls=I.Trigger,cs=I.Portal,ms=I.Close,at=n.forwardRef(({className:a,...t},s)=>e.jsx(I.Overlay,{ref:s,className:c("fixed inset-0 z-50 bg-black/80",a),...t}));at.displayName=I.Overlay.displayName;const nt=n.forwardRef(({className:a,children:t,...s},r)=>e.jsxs(cs,{children:[e.jsx(at,{}),e.jsxs(I.Content,{ref:r,className:c("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",a),...s,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));nt.displayName="DrawerContent";const us=n.forwardRef(({className:a,...t},s)=>e.jsx(I.Title,{ref:s,className:c("text-lg font-semibold leading-none tracking-tight",a),...t}));us.displayName=I.Title.displayName;const xs=n.forwardRef(({className:a,...t},s)=>e.jsx(I.Description,{ref:s,className:c("text-sm text-muted-foreground",a),...t}));xs.displayName=I.Description.displayName;const ps=()=>({id:0,text:"Hello! Welcome to the Smart Attendance System. I can help you understand how this facial recognition attendance system works. Ask me about registering students, taking attendance, checking history, or data management.",sender:"bot"}),fs=()=>{const[a,t]=n.useState(!1),[s,r]=n.useState([ps()]),[i,l]=n.useState(""),f=n.useRef(null),g={default:"I'm sorry, I don't have information about that. Try asking about registering students, taking attendance, viewing history, or data management.",greeting:["Hello!","Hi there!","How can I help you today?"],register:"To register students, go to the 'Register Students' tab. You'll need to take multiple photos of each student's face. These are used to train the facial recognition system.",attendance:"To take attendance, go to the 'Take Attendance' tab and click 'Start Attendance'. The system will scan for faces and recognize registered students automatically. After 20 seconds of stopping attendance, logs are saved automatically.",history:"The 'Attendance History' tab shows all past attendance records. You can view details by date, download reports, and see attendance statistics.",backup:"In the 'Data Management' tab, you can backup all your data or restore from a previous backup. This ensures you never lose student registration or attendance information.","how it works":"This system uses facial recognition technology to identify students. It compares faces in real-time video with pre-registered face data to mark attendance automatically."},d=o=>{if(o=o.toLowerCase(),/^(hi|hello|hey|greetings)/i.test(o)){const h=Math.floor(Math.random()*g.greeting.length);return g.greeting[h]}return o.includes("register")||o.includes("add student")||o.includes("new student")?g.register:o.includes("attendance")||o.includes("take attendance")||o.includes("record")?g.attendance:o.includes("history")||o.includes("past")||o.includes("record")||o.includes("log")?g.history:o.includes("backup")||o.includes("restore")||o.includes("data")||o.includes("management")?g.backup:o.includes("how")||o.includes("work")||o.includes("function")?g["how it works"]:g.default},m=()=>{if(!i.trim())return;const o={id:s.length,text:i,sender:"user"};r(h=>[...h,o]),l(""),setTimeout(()=>{const h={id:s.length+1,text:d(i),sender:"bot"};r(x=>[...x,h])},600)},p=o=>{o.key==="Enter"&&m()};return n.useEffect(()=>{var o;(o=f.current)==null||o.scrollIntoView({behavior:"smooth"})},[s]),e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs(st,{open:a,onOpenChange:t,children:[e.jsx(ls,{asChild:!0,children:e.jsx(w,{className:"rounded-full h-14 w-14 shadow-lg bg-attendance-primary hover:bg-attendance-primary/90",size:"icon",children:a?e.jsx(B,{className:"h-6 w-6"}):e.jsx(wt,{className:"h-6 w-6"})})}),e.jsx(nt,{className:"w-[90%] max-w-[400px] h-[500px] mx-auto rounded-t-lg flex flex-col",children:e.jsxs(T,{className:"border-none shadow-none rounded-none h-full flex flex-col",children:[e.jsxs(C,{className:"px-4 py-3 flex flex-row items-center border-b",children:[e.jsx(St,{className:"mr-2 h-5 w-5 text-attendance-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Attendance Assistant"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ask me about the system"})]}),e.jsx(ms,{className:"ml-auto",children:e.jsx(w,{variant:"ghost",size:"icon",onClick:()=>t(!1),children:e.jsx(B,{className:"h-4 w-4"})})})]}),e.jsxs(A,{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.map(o=>e.jsx("div",{className:c("flex",o.sender==="user"?"justify-end":"justify-start"),children:e.jsx("div",{className:c("max-w-[80%] rounded-lg px-4 py-2",o.sender==="user"?"bg-attendance-primary text-white":"bg-muted"),children:o.text})},o.id)),e.jsx("div",{ref:f})]}),e.jsx(ee,{className:"p-3 border-t",children:e.jsxs("div",{className:"flex w-full items-center space-x-2",children:[e.jsx(te,{placeholder:"Type a message...",value:i,onChange:o=>l(o.target.value),onKeyDown:p,className:"flex-1"}),e.jsx(w,{size:"icon",onClick:m,disabled:!i.trim(),children:e.jsx(Tt,{className:"h-4 w-4"})})]})})]})})]})})},rt=n.forwardRef(({className:a,...t},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:c("w-full caption-bottom text-sm",a),...t})}));rt.displayName="Table";const ot=n.forwardRef(({className:a,...t},s)=>e.jsx("thead",{ref:s,className:c("[&_tr]:border-b",a),...t}));ot.displayName="TableHeader";const dt=n.forwardRef(({className:a,...t},s)=>e.jsx("tbody",{ref:s,className:c("[&_tr:last-child]:border-0",a),...t}));dt.displayName="TableBody";const hs=n.forwardRef(({className:a,...t},s)=>e.jsx("tfoot",{ref:s,className:c("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t}));hs.displayName="TableFooter";const q=n.forwardRef(({className:a,...t},s)=>e.jsx("tr",{ref:s,className:c("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t}));q.displayName="TableRow";const M=n.forwardRef(({className:a,...t},s)=>e.jsx("th",{ref:s,className:c("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t}));M.displayName="TableHead";const z=n.forwardRef(({className:a,...t},s)=>e.jsx("td",{ref:s,className:c("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t}));z.displayName="TableCell";const gs=n.forwardRef(({className:a,...t},s)=>e.jsx("caption",{ref:s,className:c("mt-4 text-sm text-muted-foreground",a),...t}));gs.displayName="TableCaption";const js=()=>{const{students:a,autoRestoreStudents:t,deleteStudent:s}=U();return n.useEffect(()=>{t()},[]),e.jsxs(T,{children:[e.jsxs(C,{children:[e.jsxs(R,{className:"flex items-center",children:[e.jsx(Te,{className:"w-5 h-5 mr-2"}),"Registered Students"]}),e.jsx(D,{children:"List of all students registered in the system"})]}),e.jsx(A,{children:a.length>0?e.jsxs(rt,{children:[e.jsx(ot,{children:e.jsxs(q,{children:[e.jsx(M,{children:"Name"}),e.jsx(M,{children:"Date Added"}),e.jsx(M,{children:"Attendance Count"}),e.jsx(M,{className:"text-right",children:"Actions"})]})}),e.jsx(dt,{children:a.map(r=>e.jsxs(q,{children:[e.jsx(z,{className:"font-medium",children:r.name}),e.jsx(z,{children:new Date(r.dateAdded).toLocaleDateString()}),e.jsx(z,{children:r.attendanceCount}),e.jsx(z,{className:"text-right",children:e.jsxs(et,{children:[e.jsx(rs,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"icon",children:e.jsx(Ct,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(ae,{children:[e.jsxs(ne,{children:[e.jsx(oe,{children:"Delete Student"}),e.jsxs(de,{children:["Are you sure you want to delete ",r.name,"? This action cannot be undone."]})]}),e.jsxs(re,{children:[e.jsx(le,{children:"Cancel"}),e.jsx(ie,{className:"bg-red-500 hover:bg-red-600",onClick:()=>s(r.id),children:"Delete"})]})]})]})})]},r.id))})]}):e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No students registered yet."})})]})},bs=()=>e.jsx(Kt,{children:e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(is,{}),e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsx(js,{}),e.jsx(qe,{})]}),e.jsx(fs,{})]})}),Ns=()=>{const a=At();return n.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",a.pathname)},[a.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},vs=new Pt,ys=()=>e.jsx(kt,{client:vs,children:e.jsxs(Qt,{children:[e.jsx(Wt,{}),e.jsx(Jt,{}),e.jsx(Rt,{children:e.jsxs(Dt,{children:[e.jsx(xe,{path:"/",element:e.jsx(bs,{})}),e.jsx(xe,{path:"*",element:e.jsx(Ns,{})})]})})]})});It(document.getElementById("root")).render(e.jsx(ys,{}));
